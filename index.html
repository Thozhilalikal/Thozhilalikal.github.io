<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Organizer - Labor Narrative</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { background-color: #050505; color: #f4f4f5; font-family: sans-serif; overflow-x: hidden; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #27272a; border-radius: 10px; }
        
        /* Smooth transitions for the narrative passages */
        .passage-enter { opacity: 0; transform: translateY(10px); }
        .passage-enter-active { opacity: 1; transform: translateY(0); transition: opacity 500ms, transform 500ms; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Custom Inline SVG Icons
        const Icon = ({ name, className }) => {
            const icons = {
                Users: (
                    <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                ),
                Shield: (
                    <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                ),
                TrendingUp: (
                    <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/>
                    </svg>
                ),
                Coffee: (
                    <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <path d="M18 8h1a4 4 0 0 1 0 8h-1"/><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/>
                    </svg>
                ),
                AlertTriangle: (
                    <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                )
            };
            return icons[name] || null;
        };

        const BTN_BASE = "w-full font-medium py-3 px-6 rounded-xl border transition-all flex items-center justify-center text-sm md:text-base active:scale-[0.98] animate-in fade-in slide-in-from-bottom-2 duration-500 fill-mode-forwards";
        const BTN_ACTION = `${BTN_BASE} bg-zinc-800 hover:bg-zinc-700 text-white border-white/10`;
        const BTN_GREEN = `${BTN_BASE} bg-emerald-600 hover:bg-emerald-500 text-white border-transparent shadow-lg shadow-emerald-900/20 font-bold`;
        const BTN_ORANGE = `${BTN_BASE} bg-orange-600 hover:bg-orange-500 text-white border-transparent shadow-lg shadow-orange-900/20 font-bold`;

        const Illustration = ({ type }) => (
            <div className="w-full h-40 md:h-56 rounded-xl overflow-hidden shadow-2xl border border-white/10 mb-6 bg-zinc-900 relative flex items-center justify-center group">
                <div className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent" />
                <div className="z-10 text-zinc-500 flex flex-col items-center gap-2">
                    <Icon name={type || "Shield"} className="w-16 h-16 opacity-20 group-hover:scale-110 transition-transform duration-700" />
                    <div className="w-24 h-1 bg-zinc-800 rounded-full overflow-hidden">
                        <div className="w-1/2 h-full bg-orange-500/50 animate-pulse" />
                    </div>
                </div>
            </div>
        );

        const VideoPlayer = ({ src }) => {
            return (
                <div className="relative w-full max-w-[280px] mx-auto aspect-[9/16] rounded-3xl overflow-hidden border-4 border-zinc-800 shadow-2xl mb-8 bg-black group">
                    <video 
                        className="w-full h-full object-cover"
                        src={src}
                        controls
                        playsInline
                        loop
                    />
                    <div className="absolute top-4 left-4 flex items-center gap-2 pointer-events-none">
                        <div className="w-8 h-8 rounded-full bg-zinc-900/80 backdrop-blur flex items-center justify-center border border-white/10">
                            <Icon name="Users" className="w-4 h-4 text-orange-500" />
                        </div>
                        <span className="text-[10px] font-bold text-white tracking-widest drop-shadow-md uppercase">Live at JFK8</span>
                    </div>
                </div>
            );
        }

        function App() {
            const [passage, setPassage] = useState('Start');
            const [stats, setStats] = useState({
                support: 0,
                filed: false,
                appeals: 0,
                years: 0,
                turnover: 80,
                alliances: "",
                negotiationStyle: "",
                morale: "neutral",
            });
            const [isUpdating, setIsUpdating] = useState(false);

            const updateStats = (updates) => {
                setIsUpdating(true);
                setStats(prev => {
                    let newState = { ...prev, ...updates };
                    newState.support = Math.max(0, Math.min(100, newState.support));
                    return newState;
                });
                setTimeout(() => setIsUpdating(false), 800);
            };

            const navigate = (nextPassage, statUpdates = {}) => {
                updateStats(statUpdates);
                setPassage(nextPassage);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            const getRandom = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);

            const renderPassage = () => {
                switch (passage) {
                    case 'Start':
                        return (
                            <div className="space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700">
                                <VideoPlayer src="orgvideo1.mp4" />
                                <div className="text-center pb-2">
                                    <h1 className="text-3xl font-bold text-orange-500 uppercase tracking-tighter">The Organizer</h1>
                                    <p className="text-xs text-zinc-500 uppercase tracking-widest mt-1">Labor Narrative</p>
                                </div>
                                <p className="text-zinc-300 leading-relaxed">You clock out after a ten-hour shift at the Amazon fulfillment center. Boxes, scanners, quotas — an endless rhythm of control. You’re tired, underpaid, and fed up.</p>
                                <p className="text-zinc-300 leading-relaxed">
  You clock out after a ten-hour shift at the Amazon fulfillment center. Boxes, scanners, quotas — an endless rhythm of control. You’re tired, underpaid, and fed up.
</p>

<p className="text-zinc-400 italic border-l-2 border-orange-500/50 pl-4 py-1">
  You’ve read about 
  <a
    href="https://dissentmagazine.org/online_articles/the-amazon-labor-unions-historic-breakthrough/"
    target="_blank"
    rel="noopener noreferrer"
    className="text-orange-400 hover:text-orange-300 underline underline-offset-4 decoration-orange-500/50"
  >
    the warehouse in Bessemer
  </a>
  . You’ve seen the clips of <span className="text-white font-medium">Chris Smalls</span> outside JFK8, grilling burgers and organizing in defiance. Tonight, you’ve decided: you’ll start organizing your facility.
</p>

                                <div className="grid grid-cols-1 gap-3 pt-4">
                                    <button onClick={() => navigate('Breakroom', { support: 5 })} className={BTN_ACTION}>Start talking to coworkers in the breakroom</button>
                                    <button onClick={() => navigate('UnionBasics')} className={BTN_ACTION}>Read about how to file for a union election</button>
                                </div>
                            </div>
                        );

                    case 'Breakroom':
                        return (
                            <div className="space-y-4 animate-in fade-in duration-500">
                                <Illustration type="Coffee" />
                                <h2 className="text-2xl font-bold">Breakroom</h2>
                                <p className="text-zinc-300">You bring up pay and safety with a few coworkers during break. Some listen, others stay silent. Cameras hum overhead.</p>
                                <div className="bg-orange-500/10 border border-orange-500/30 p-4 rounded-lg text-sm text-orange-200">
                                    The next day, HR posts flyers: “Amazon listens to associates directly — no third party needed.” Classic anti-union language.
                                </div>
                                <div className="grid grid-cols-1 gap-3 pt-4">
                                    <button onClick={() => navigate('CardDrive', { support: stats.support + 10 })} className={BTN_ACTION}>Ignore it and keep organizing</button>
                                    <button onClick={() => navigate('UnionBasics')} className={BTN_ACTION}>Ask a labor lawyer how to proceed</button>
                                </div>
                            </div>
                        );

                    case 'UnionBasics':
                        return (
                            <div className="space-y-4">
                                <Illustration type="Shield" />
                                <h2 className="text-2xl font-bold">Union Basics</h2>
                                <p className="text-zinc-300">To trigger an election with the <span className="font-bold text-white uppercase">NLRB</span>, you need signatures from <span className="text-orange-400">30% of eligible workers</span> on authorization cards.</p>
                                <p className="text-zinc-400">But veterans warn: filing with just 30% is a <span className="text-red-400 font-bold">recipe for disaster</span> — Amazon’s list will never match yours, and turnover can hit 100% per year. You’ll need closer to <span className="text-emerald-400 font-bold">70% support</span> before filing.</p>
                                <div className="grid grid-cols-1 gap-3 pt-4">
                                    <button onClick={() => navigate('CardDrive', { support: stats.support + 5 })} className={BTN_ACTION}>Begin collecting cards</button>
                                    <button onClick={() => navigate('TurnoverTalk')} className={BTN_ACTION}>Consult experienced organizers about Amazon’s turnover problem</button>
                                </div>
                            </div>
                        );

                    case 'TurnoverTalk':
                        return (
                            <div className="space-y-4">
                                <Illustration type="Users" />
                                <h2 className="text-2xl font-bold">The Turnover Problem</h2>
                                <p className="text-zinc-300 text-lg italic">“At Amazon, the warehouse can replace its entire workforce in a year. People quit before you can even get their contact info.”</p>
                                <p className="text-zinc-400">An older organizer explains that tying beyond work — mutual aid, solidarity networks — is the only way to outlast the churn.</p>
                                <button onClick={() => navigate('CardDrive', { support: stats.support + 10 })} className={BTN_ACTION}>Start the card drive anyway</button>
                            </div>
                        );

                    case 'CardDrive':
                        const supGain = getRandom(10, 25);
                        const curSup = stats.support + supGain;
                        return (
                            <div className="space-y-4">
                                <Illustration type="Users" />
                                <h2 className="text-2xl font-bold">Distributing Authorization Cards</h2>
                                <p className="text-zinc-300">You and your coworkers begin distributing authorization cards quietly.</p>
                                {curSup >= 70 ? (
                                    <div className="space-y-4 border border-emerald-500/30 bg-emerald-500/5 p-4 rounded-xl">
                                        <p className="text-emerald-300 font-bold text-lg">You’ve reached strong majority support ({curSup}%).</p>
                                        <button onClick={() => navigate('ElectionFiling', { support: curSup, filed: true })} className={BTN_GREEN}>File for election</button>
                                    </div>
                                ) : curSup >= 30 ? (
                                    <div className="space-y-3">
                                        <p className="text-orange-200">You’ve reached the minimum threshold ({curSup}%), but it’s risky.</p>
                                        <button onClick={() => navigate('ElectionFiling', { support: curSup, filed: true })} className={BTN_ORANGE}>File now (risky)</button>
                                        <button onClick={() => navigate('CardDrive', { support: curSup })} className={BTN_ACTION}>Wait and build stronger support</button>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        <p className="text-zinc-400">Current support: {curSup}%. You need more momentum.</p>
                                        <button onClick={() => navigate('CardDrive', { support: curSup })} className={BTN_ACTION}>Keep talking to workers</button>
                                    </div>
                                )}
                            </div>
                        );

                    case 'ElectionFiling':
                        return (
                            <div className="space-y-4">
                                <Illustration type="AlertTriangle" />
                                <h2 className="text-2xl font-bold">Filing with the NLRB</h2>
                                <p className="text-zinc-300">You file with the NLRB. Amazon responds instantly with mandatory “information sessions” — <span className="text-red-400 font-bold uppercase">captive audience meetings.</span></p>
                                <p className="text-zinc-400 italic">Supervisors warn: “Unions take your dues. We already pay well.”</p>
                                <div className="grid grid-cols-1 gap-3 pt-4">
                                    <button onClick={() => navigate('VoteDay', { support: stats.support - 10 })} className={BTN_ACTION}>Push straight to the vote</button>
                                    <button onClick={() => navigate('RebuildSupport', { support: stats.support + 5 })} className={BTN_ACTION}>Hold one-on-ones to rebuild trust</button>
                                </div>
                            </div>
                        );

                    case 'RebuildSupport':
                        return (
                            <div className="space-y-4">
                                <h2 className="text-2xl font-bold">Rebuilding Support</h2>
                                <p className="text-zinc-300">You talk to coworkers after meetings, countering misinformation. Some regain confidence; others stay afraid.</p>
                                <button onClick={() => navigate('VoteDay', { support: stats.support + 10 })} className={BTN_GREEN}>Proceed to election</button>
                            </div>
                        );

                    case 'VoteDay':
                        const won = stats.support >= 60;
                        return (
                            <div className="space-y-4 text-center">
                                <Illustration type={won ? "TrendingUp" : "AlertTriangle"} />
                                <h2 className="text-3xl font-bold uppercase">{won ? "Victory" : "Defeat"}</h2>
                                <p className="text-zinc-300 leading-relaxed">
                                    {won 
                                        ? `You win the election — 52% yes. The room erupts. You've made history.` 
                                        : `You lose. Fear and confusion win this round. The company's tactics worked.`}
                                </p>
                                {won ? (
                                    <button onClick={() => navigate('Aftermath', { victory: true })} className={BTN_GREEN}>Continue</button>
                                ) : (
                                    <button onClick={() => navigate('Start', { support: 0 })} className={BTN_ACTION}>Regroup and try again</button>
                                )}
                            </div>
                        );

                    case 'Aftermath':
                        return (
                            <div className="space-y-4">
                                <h2 className="text-2xl font-bold text-emerald-400 underline decoration-emerald-500/30">Election Victory</h2>
                                <p className="text-zinc-300">You’ve done it. The workers voted to unionize. But Amazon refuses to bargain and <span className="text-red-400 font-bold uppercase underline">appeals the result.</span></p>
                                <p className="text-zinc-400 italic">It could take three to five years before the company is legally forced to negotiate.</p>
                                <div className="grid grid-cols-1 gap-3 pt-4">
                                    <button onClick={() => navigate('Epilogue', { morale: "legacy", support: 90 })} className={BTN_ACTION}>Commit to the long-term struggle</button>
                                    <button onClick={() => navigate('Epilogue', { morale: "memory", support: 40 })} className={BTN_ACTION}>Focus on small, daily shop floor wins</button>
                                </div>
                            </div>
                        );

                    case 'Epilogue':
                        const isLegacy = stats.morale === 'legacy' || stats.support >= 80;
                        return (
                            <div className="space-y-6">
                                <Illustration type="Shield" />
                                <h2 className="text-2xl font-bold uppercase tracking-widest text-zinc-500 text-center">Ten Years Later</h2>
                                <div className="bg-zinc-800/50 p-6 rounded-2xl border border-white/5 italic">
                                    {isLegacy ? (
                                        <p className="text-emerald-300">The union endures. A community center thrives. Your fight inspired others across the country.</p>
                                    ) : (
                                        <p className="text-zinc-400">The union dissolved, but seeds were planted. People still remember the year the warehouse stood up.</p>
                                    )}
                                </div>
                                <button onClick={() => navigate('Start', { support: 0 })} className={BTN_ACTION}>Restart Narrative</button>
                            </div>
                        );

                    default:
                        return <button onClick={() => navigate('Start')}>Back to Start</button>;
                }
            };

            return (
                <div className="min-h-screen bg-[#050505] text-zinc-100 p-4 md:p-8 font-sans selection:bg-orange-500/30">
                    <div className="max-w-2xl mx-auto space-y-6">
                        
                        {/* DASHBOARD */}
                        <div className="bg-zinc-900/90 backdrop-blur-md border border-white/10 rounded-2xl p-6 sticky top-4 z-50 shadow-2xl overflow-hidden">
                            <div className="flex flex-col">
                                <span className="text-[10px] uppercase tracking-widest text-zinc-500 font-bold mb-2 flex items-center">
                                    <Icon name="Users" className="w-3 h-3 mr-1" /> Worker Support
                                </span>
                                <div className="flex items-center">
                                    <div className="flex-1 h-3 bg-zinc-800 rounded-full mr-4 overflow-hidden border border-white/5 relative">
                                        <div 
                                            className="h-full bg-orange-500 transition-all duration-1000 shadow-[0_0_10px_rgba(249,115,22,0.3)]" 
                                            style={{ width: `${stats.support}%` }} 
                                        />
                                    </div>
                                    <span className="text-base font-mono font-black text-white">{stats.support}%</span>
                                </div>
                            </div>
                            {isUpdating && <div className="absolute inset-0 bg-orange-500/5 animate-pulse pointer-events-none" />}
                        </div>

                        {/* NARRATIVE AREA */}
                        <div className="bg-zinc-900 border border-white/5 rounded-3xl p-6 md:p-10 shadow-2xl min-h-[480px]">
                            {renderPassage()}
                        </div>

                        <footer className="text-center opacity-20 text-[9px] uppercase tracking-[0.4em] pt-8 pb-12">
                            The Organizer — Amazon Labor Narrative
                        </footer>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
